document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".menu-toggle"),t=document.querySelector(".header__nav"),i=document.querySelectorAll(".nav__link"),s=document.querySelectorAll(".skill__progress"),c=document.getElementById("contactForm");e&&t&&e.addEventListener("click",(function(){e.classList.toggle("active"),t.classList.toggle("active"),document.body.classList.toggle("menu-open")})),i.forEach((i=>{i.addEventListener("click",(function(){window.innerWidth<768&&(e.classList.remove("active"),t.classList.remove("active"),document.body.classList.remove("menu-open"))}))}));const n=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(s.forEach((e=>{const t=e.style.width;e.style.width="0",setTimeout((()=>{e.style.width=t}),200)})),n.unobserve(e.target))}))}),{threshold:.2}),o=document.querySelector(".skills");o&&n.observe(o),c&&c.addEventListener("submit",(function(e){e.preventDefault();const t=new FormData(c);Object.fromEntries(t.entries());alert("¡Mensaje enviado con éxito!"),c.reset()})),document.querySelectorAll('a[href^="#"]').forEach((e=>{e.addEventListener("click",(function(e){e.preventDefault();const t=this.getAttribute("href");if("#"===t)return;const i=document.querySelector(t);if(i){const e=document.querySelector(".header").offsetHeight,t=i.getBoundingClientRect().top+window.pageYOffset-e;window.scrollTo({top:t,behavior:"smooth"})}}))}));const a=document.getElementById("certificateModal"),r=document.getElementById("modalTitle"),l=document.getElementById("certificateViewer"),d=document.getElementById("certificateImage"),u=document.getElementById("downloadCertificate"),f=document.querySelector(".modal__close"),m=document.querySelector(".certifications__grid");let v={};function g(){const e=document.querySelectorAll(".cert__card");0!==e.length&&e.forEach((e=>{const t=e.querySelector(".cert__view");if(t){const e=t.querySelector("i");e&&(e.addEventListener("mouseenter",(function(){this.style.transform="scale(1.2)"})),e.addEventListener("mouseleave",(function(){this.style.transform="scale(1)"})))}e.addEventListener("click",(function(){!function(e){if(v[e]){const t=v[e];r.textContent=`${t.title} - ${t.issuer}`,l.setAttribute("data",t.file),d.setAttribute("src",t.imageAlt),d.setAttribute("alt",t.title),u.setAttribute("href",t.file),u.setAttribute("download",`${t.title}.pdf`),a.classList.add("show"),document.body.style.overflow="hidden";document.querySelectorAll(".cert__view").forEach((e=>e.classList.remove("active"))),setTimeout((()=>{a.classList.add("hint-visible"),setTimeout((()=>{a.classList.remove("hint-visible")}),5e3)}),1e3),setTimeout((()=>{try{l.contentDocument&&0===l.contentDocument.body.childElementCount?(l.style.display="none",document.querySelector(".certificate-fallback").style.display="flex"):(l.style.display="block",document.querySelector(".certificate-fallback").style.display="none")}catch(e){console.log("Usando visualizador de PDF embebido del navegador")}}),1e3)}}(this.getAttribute("data-cert"))})),e.addEventListener("mouseenter",(function(){const e=this.querySelector(".cert__view");e&&e.classList.add("active")})),e.addEventListener("mouseleave",(function(){const e=this.querySelector(".cert__view");e&&e.classList.remove("active")}))}))}if(a&&r&&l&&d&&u&&f){function b(){a.classList.add("closing"),setTimeout((()=>{a.classList.remove("show"),a.classList.remove("closing"),a.classList.remove("hint-visible"),document.body.style.overflow="auto",setTimeout((()=>{a.classList.contains("show")||(l.setAttribute("data",""),d.setAttribute("src",""))}),300)}),300)}fetch("build/data/certificates.json").then((e=>{if(!e.ok)throw new Error("No se pudo cargar el archivo de certificados");return e.json()})).then((e=>{e.certificates.forEach((e=>{v[e.id]=e})),m&&(m.innerHTML="",e.certificates.forEach((e=>{const t=`\n                            <div class="cert__card" data-cert="${e.id}">\n                                <div class="cert__icon">\n                                    <i class="${e.icon}"></i>\n                                </div>\n                                <h3 class="cert__title">${e.title}</h3>\n                                <p class="cert__issuer">${e.issuer}</p>\n                                <p class="cert__date">${e.date}</p>\n                                <div class="cert__view">\n                                    <i class="fa-solid fa-magnifying-glass-plus"></i> Ver certificado completo\n                                </div>\n                            </div>\n                        `;m.innerHTML+=t})),g())})).catch((e=>{console.error("Error cargando los certificados:",e),v={"react-fundamentals":{title:"React Fundamentals",issuer:"Meta (Facebook)",file:"build/certificates/react-fundamentals.pdf",imageAlt:"build/certificates/react-fundamentals.jpg"},"nodejs-backend":{title:"Node.js Backend Development",issuer:"Udemy",file:"build/certificates/nodejs-backend.pdf",imageAlt:"build/certificates/nodejs-backend.jpg"},"javascript-avanzado":{title:"JavaScript Avanzado",issuer:"Platzi",file:"build/certificates/javascript-avanzado.pdf",imageAlt:"build/certificates/javascript-avanzado.jpg"},"sql-database":{title:"SQL & Database Management",issuer:"SQL Academy",file:"build/certificates/sql-database.pdf",imageAlt:"build/certificates/sql-database.jpg"},"css-sass":{title:"CSS Avanzado y SASS",issuer:"Codecademy",file:"build/certificates/css-sass.pdf",imageAlt:"build/certificates/css-sass.jpg"},"git-github":{title:"Control de Versiones con Git",issuer:"GitHub Learning Lab",file:"build/certificates/git-github.pdf",imageAlt:"build/certificates/git-github.jpg"}},g()})),f.addEventListener("click",(function(e){e.stopPropagation(),b()})),a.addEventListener("click",(function(e){e.target===a&&b()}));const h=document.querySelector(".modal__content");h&&h.addEventListener("click",(function(e){e.stopPropagation()})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&a.classList.contains("show")&&b()})),u&&(u.addEventListener("mouseenter",(function(){this.classList.add("btn--hover")})),u.addEventListener("mouseleave",(function(){this.classList.remove("btn--hover")})))}}));